import React from "react";
import { connect } from "react-redux";
import classnames from "classnames";

import { Menu, Icon } from "antd";

const { SubMenu } = Menu;

const Queue = () => (
    <svg viewBox="0 0 1024 1024" width="1em" height="1em" fill="currentColor">
        <path d="M787.030425 583.913866c-18.807345-15.09172-39.693024-27.337625-61.674665-37.071314-18.591427-8.200776-45.601594-13.340843-58.611909-30.726815-24.823362-33.354666 30.835286-83.438341 42.538839-114.493637 16.949021-44.945655 25.039279-98.964966 0.763386-142.705166-23.016203-41.225937-66.323545-62.111616-109.897969-62.222133 36.303834 70.970378 36.851303 158.452825 0.819668 254.136048-8.473999 22.307052-22.364357 42.648332-35.815717 62.223157-3.225461 4.701069-7.215332 10.606569-11.151991 16.510022 8.473999 3.061732 16.620539 6.016017 24.003693 9.405207 37.618782 16.731056 71.5158 37.178761 100.875478 60.691267 21.433148 17.385972 72.28328 58.94039 86.773296 121.489982 27.992541-8.31027 52.216245-22.089088 61.782112-46.692439 2.898003-7.546883 3.992941-15.529695 3.992941-23.512507C831.428611 623.281479 807.317471 600.317465 787.030425 583.913866z" />
        <path d="M685.879678 754.942101c0-37.071314-32.366152-67.689658-59.595306-89.778746-25.043373-20.120246-53.144384-36.415374-82.396615-49.536206-24.987091-11.044544-61.182454-17.825994-78.515215-41.225937-33.245172-44.61615 41.280172-111.650893 57.025785-153.204287 22.636556-60.142775 33.461089-132.426055 0.874927-191.038988-54.239322-97.432053-193.337333-113.3987-269.225721-32.257681-40.680515 43.302225-49.538253 100.05581-40.353057 157.139923 5.523807 34.337039 15.965623 68.125587 31.930223 98.962919 13.670348 26.463722 51.78134 58.06751 51.78134 88.358397 0 57.081043-79.117942 66.922179-118.267591 88.465844-42.48358 23.401989-101.915158 62.877049-112.196315 114.820072-16.508999 49.864688 41.007973 85.842087 79.282694 98.30698 96.77816 31.712259 207.551056 28.105105 308.319088 22.964014 64.572668-3.279696 196.506513-4.483104 225.978754-80.59355C684.348812 776.374226 685.879678 765.549693 685.879678 754.942101z" />
        <path d="M926.512177 494.245637c-14.162558-11.373025-29.7997-20.559245-46.149063-27.776623-13.942547-6.233981-34.280758-10.17064-44.014446-23.074531-18.591427-25.041326 23.184025-62.549591 31.878035-85.951581 12.791327-33.679054 18.863626-74.139557 0.655939-106.945731-19.411095-34.773991-58.012252-50.849108-94.536097-46.25651 3.061732 4.483104 6.343475 8.968256 9.021467 13.778818 33.133631 59.597353 34.664497 133.302005 4.481058 213.237569-5.739724 15.20019-13.994736 28.650527-22.580275 41.443901 27.285436 12.685927 52.216245 27.995611 74.197886 45.601594 13.886265 11.154038 47.675836 38.819121 65.120137 80.483033 23.508413-5.9055 44.394093-16.513092 52.324716-36.742832 2.023076-5.686513 2.950192-11.589966 2.950192-17.605983C959.861726 523.661597 941.71032 506.493589 926.512177 494.245637z" />
    </svg>
);

const Doctor = () => (
    <svg viewBox="0 0 1024 1024" width="1em" height="1em" fill="currentColor">
        <path d="M25.6 1009.2544v-63.1296c0-188.1088 137.6256-343.04 317.5424-372.224l155.5456 309.0432 155.4944-309.0944c180.0192 29.2864 317.5424 184.2176 317.5424 372.2752v63.1296H25.6zM656.3328 0h-315.392a126.1568 126.1568 0 0 0-126.1056 126.1568v157.696a283.8528 283.8528 0 1 0 567.7568 0v-157.696A126.3104 126.3104 0 0 0 656.3328 0z m-29.44 294.4h-96.768v96.768H467.1488V294.4h-96.768V231.424h96.768v-96.768h63.0784v96.768h96.768V294.4z" />
    </svg>
);

const Patient = () => (
    <svg viewBox="0 0 1024 1024" width="1em" height="1em" fill="currentColor">
        <path d="M896 531.2c-12.8-83.2-51.2-160-108.8-224-25.6-25.6-51.2-44.8-76.8-57.6 0 19.2-6.4 32-12.8 51.2 83.2 51.2 134.4 134.4 153.6 230.4-89.6 0-147.2 70.4-147.2 147.2 0 83.2 70.4 153.6 153.6 153.6s153.6-70.4 153.6-153.6c0-70.4-51.2-128-115.2-147.2zM185.6 486.4c25.6-96 96-172.8 179.2-211.2 25.6 57.6 83.2 96 147.2 96 83.2 0 153.6-70.4 153.6-153.6S595.2 64 512 64 358.4 134.4 358.4 217.6v6.4c-44.8 19.2-83.2 51.2-121.6 83.2-51.2 51.2-83.2 115.2-102.4 179.2h51.2zM512 915.2c-102.4 0-192-44.8-249.6-115.2 38.4-25.6 64-70.4 64-121.6 0-83.2-70.4-153.6-153.6-153.6S19.2 595.2 19.2 678.4 89.6 832 172.8 832c19.2 0 32 0 51.2-6.4 6.4 6.4 12.8 19.2 25.6 25.6 70.4 70.4 172.8 115.2 275.2 115.2 102.4 0 192-38.4 268.8-108.8-12.8-6.4-32-12.8-44.8-25.6-76.8 57.6-153.6 83.2-236.8 83.2zM620.8 614.4H403.2c-12.8 0-25.6-12.8-25.6-25.6s12.8-25.6 25.6-25.6h217.6c12.8 0 25.6 12.8 25.6 25.6s-12.8 25.6-25.6 25.6z" />
        <path d="M486.4 697.6V473.6c0-12.8 12.8-25.6 25.6-25.6s25.6 12.8 25.6 25.6v217.6c0 12.8-12.8 25.6-25.6 25.6-12.8 6.4-25.6-6.4-25.6-19.2z" />
    </svg>
);

const Avatar = () => {
    return <Icon component={Doctor} />;
};

export default connect(state => ({ browser: state.browser }))(
    class Sidebar extends React.Component {
        handleClick({ key }) {
            let pathnames = window.location.pathname.split("/");
            if (pathnames.indexOf(key) > -1) return;
            let today = "";
            if (key === "appointRegister" || key === "appointOperationCheck" || key === "appointOperation") today = "#/today";
            window.location.href = CONFIG.baseURL + "/" + key + today;
        }
        render() {
            const { height } = this.props.browser;
            const { activePage, activeSubmenu } = this.props;
            return (
                <div className="sidebar" style={{ height: height - 50 }}>
                    <Menu onClick={this.handleClick} defaultSelectedKeys={[activePage]} defaultOpenKeys={["my", activeSubmenu]} mode="inline">
                        <Menu.Item key="queue">
                            <Icon component={Queue} />
                            <span>排队叫号</span>
                        </Menu.Item>
                        <SubMenu
                            key="my"
                            title={
                                <span>
                                    <Avatar />
                                    <span>我的</span>
                                </span>
                            }
                        >
                            <Menu.Item key="myPatient">我的患者</Menu.Item>
                            <Menu.Item key="myOperation">我的手术</Menu.Item>
                        </SubMenu>
                        <Menu.Divider />
                        <Menu.Item key="patient">
                            <Icon component={Patient} />
                            <span>患者信息管理</span>
                        </Menu.Item>
                        <SubMenu
                            key="appoint"
                            title={
                                <span>
                                    <Icon type="clock-circle" />
                                    <span>预约管理</span>
                                </span>
                            }
                        >
                            <Menu.Item key="appointRegister">预约挂号</Menu.Item>
                            <Menu.Item key="appointOperationCheck">术前检查预约</Menu.Item>
                            <Menu.Item key="appointOperation">手术预约</Menu.Item>
                        </SubMenu>

                        <Menu.Item key="medicine">
                            <Icon type="medicine-box" />
                            <span>药品管理</span>
                        </Menu.Item>
                        <Menu.Item key="doctor">
                            <Icon component={Doctor} />
                            <span>医生管理</span>
                        </Menu.Item>
                    </Menu>
                </div>
            );
        }
    }
);
